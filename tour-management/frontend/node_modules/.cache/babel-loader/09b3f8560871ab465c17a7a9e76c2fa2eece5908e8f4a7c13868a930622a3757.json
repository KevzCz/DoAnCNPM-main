{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\asus\\\\Desktop\\\\What I like\\\\web\\\\DoAnCNPM-main\\\\tour-management\\\\frontend\\\\src\\\\pages\\\\Profile.jsx\",\n  _s = $RefreshSig$();\n// Profile.jsx\nimport React, { useContext, useState, useEffect } from 'react';\nimport AuthContext from '../context/AuthContext';\nimport \"../styles/profile.css\"; // Make sure to create and import the CSS file\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Profile = () => {\n  _s();\n  const {\n    user,\n    setUser\n  } = useContext(AuthContext);\n  const [userData, setUserData] = useState({\n    fullname: '',\n    gender: '',\n    birthday: '',\n    phone: ''\n  });\n  const [editing, setEditing] = useState(false);\n  useEffect(() => {\n    const fetchUserData = async () => {\n      try {\n        const res = await axios.get(`http://localhost:3000/user/${user.phone}`);\n        setUserData(res.data);\n      } catch (err) {\n        console.error('Failed to fetch user data:', err);\n      }\n    };\n    fetchUserData();\n  }, [user.phone]);\n  const handleChange = e => {\n    const {\n      id,\n      value\n    } = e.target;\n    setUserData(prevData => ({\n      ...prevData,\n      [id]: value\n    }));\n  };\n  const handleSaveClick = async () => {\n    try {\n      console.log('Sending update request with data:', userData);\n      const res = await axios.put('http://localhost:3000/user/update', userData);\n      console.log('Update response:', res);\n      setUser({\n        ...user,\n        ...userData\n      });\n      setEditing(false);\n      alert('Profile updated successfully!');\n    } catch (err) {\n      var _err$response;\n      console.error('Failed to update profile:', err);\n      alert('Failed to update profile: ' + (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || err.message));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"profile-avatar\",\n        src: user.photo || \"/images/ava-1.jpg\",\n        alt: \"Avatar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"profile-username\",\n        children: userData.fullname\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"profile-email\",\n        children: userData.phone\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-details\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"profile-section-title\",\n        children: \"Th\\xF4ng tin t\\xE0i kho\\u1EA3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile-info-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"profile-info-label\",\n            children: \"Full Name:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 25\n          }, this), editing ? /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"fullname\",\n            value: userData.fullname,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"profile-info-value\",\n            children: userData.fullname\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile-info-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"profile-info-label\",\n            children: \"Phone Number:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"profile-info-value\",\n            children: userData.phone\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile-info-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"profile-info-label\",\n            children: \"Gender:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 25\n          }, this), editing ? /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"gender\",\n            value: userData.gender,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"profile-info-value\",\n            children: userData.gender\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile-info-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"profile-info-label\",\n            children: \"Birthday:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 25\n          }, this), editing ? /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            id: \"birthday\",\n            value: userData.birthday,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"profile-info-value\",\n            children: userData.birthday\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this), editing ? /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn save-btn\",\n        onClick: handleSaveClick,\n        children: \"Save\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn edit-btn\",\n        onClick: () => setEditing(true),\n        children: \"Edit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 9\n  }, this);\n};\n_s(Profile, \"+kMcN1d33K9jixGLO6TjoUIEzSY=\");\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useContext","useState","useEffect","AuthContext","axios","Profile","user","setUser","userData","setUserData","fullname","gender","birthday","phone","editing","setEditing","fetchUserData","res","get","data","err","console","error","handleChange","e","id","value","target","prevData","handleSaveClick","log","put","alert","response","message","photo"],"sources":["C:/Users/asus/Desktop/What I like/web/DoAnCNPM-main/tour-management/frontend/src/pages/Profile.jsx"],"sourcesContent":["// Profile.jsx\r\nimport React, { useContext, useState, useEffect } from 'react';\r\nimport AuthContext from '../context/AuthContext';\r\nimport \"../styles/profile.css\";  // Make sure to create and import the CSS file\r\nimport axios from 'axios';\r\n\r\nconst Profile = () => {\r\n    const { user, setUser } = useContext(AuthContext);\r\n    const [userData, setUserData] = useState({\r\n        fullname: '',\r\n        gender: '',\r\n        birthday: '',\r\n        phone: ''\r\n    });\r\n    const [editing, setEditing] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const fetchUserData = async () => {\r\n            try {\r\n                const res = await axios.get(`http://localhost:3000/user/${user.phone}`);\r\n                setUserData(res.data);\r\n            } catch (err) {\r\n                console.error('Failed to fetch user data:', err);\r\n            }\r\n        };\r\n        fetchUserData();\r\n    }, [user.phone]);\r\n\r\n    const handleChange = (e) => {\r\n        const { id, value } = e.target;\r\n        setUserData((prevData) => ({\r\n            ...prevData,\r\n            [id]: value\r\n        }));\r\n    };\r\n\r\n    const handleSaveClick = async () => {\r\n        try {\r\n            console.log('Sending update request with data:', userData);\r\n            const res = await axios.put('http://localhost:3000/user/update', userData);\r\n            console.log('Update response:', res);\r\n            setUser({ ...user, ...userData });\r\n            setEditing(false);\r\n            alert('Profile updated successfully!');\r\n        } catch (err) {\r\n            console.error('Failed to update profile:', err);\r\n            alert('Failed to update profile: ' + (err.response?.data || err.message));\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"profile-container\">\r\n            <div className=\"profile-header\">\r\n                <img className=\"profile-avatar\" src={user.photo || \"/images/ava-1.jpg\"} alt=\"Avatar\" />\r\n                <h1 className=\"profile-username\">{userData.fullname}</h1>\r\n                <p className=\"profile-email\">{userData.phone}</p>\r\n            </div>\r\n            <div className=\"profile-details\">\r\n                <h2 className=\"profile-section-title\">Thông tin tài khoản</h2>\r\n                <div className=\"profile-info\">\r\n                    <div className=\"profile-info-item\">\r\n                        <span className=\"profile-info-label\">Full Name:</span>\r\n                        {editing ? (\r\n                            <input\r\n                                type=\"text\"\r\n                                id=\"fullname\"\r\n                                value={userData.fullname}\r\n                                onChange={handleChange}\r\n                            />\r\n                        ) : (\r\n                            <span className=\"profile-info-value\">{userData.fullname}</span>\r\n                        )}\r\n                    </div>\r\n                    <div className=\"profile-info-item\">\r\n                        <span className=\"profile-info-label\">Phone Number:</span>\r\n                        <span className=\"profile-info-value\">{userData.phone}</span>\r\n                    </div>\r\n                    <div className=\"profile-info-item\">\r\n                        <span className=\"profile-info-label\">Gender:</span>\r\n                        {editing ? (\r\n                            <input\r\n                                type=\"text\"\r\n                                id=\"gender\"\r\n                                value={userData.gender}\r\n                                onChange={handleChange}\r\n                            />\r\n                        ) : (\r\n                            <span className=\"profile-info-value\">{userData.gender}</span>\r\n                        )}\r\n                    </div>\r\n                    <div className=\"profile-info-item\">\r\n                        <span className=\"profile-info-label\">Birthday:</span>\r\n                        {editing ? (\r\n                            <input\r\n                                type=\"date\"\r\n                                id=\"birthday\"\r\n                                value={userData.birthday}\r\n                                onChange={handleChange}\r\n                            />\r\n                        ) : (\r\n                            <span className=\"profile-info-value\">{userData.birthday}</span>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n                {editing ? (\r\n                    <button className=\"btn save-btn\" onClick={handleSaveClick}>Save</button>\r\n                ) : (\r\n                    <button className=\"btn edit-btn\" onClick={() => setEditing(true)}>Edit</button>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Profile;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}